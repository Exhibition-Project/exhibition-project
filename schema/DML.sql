--EXHIBITION TABLE INSERT
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'카게에 거장 후지시로 세이지 빛과 그림자의 판타지 전','2021-06-10','2021-10-12','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021 브리즈 아트페어','2021-09-02','2021-09-05','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제 55회 한국미술협회전','2021-09-09','2021-09-17','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'빌라다르 2021','2021-09-09','2021-09-17','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'정비파 목판화전','2021-09-25','2021-10-05','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'SEEA 2021','2021-10-01','2021-10-09','디자인',2500,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'현대한국화협회40주년기념대작전','2021-10-08','2021-10-16','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'창립86주년 후소회 50회 정기전','2021-10-20','2021-10-28','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'민화의 비상','2021-10-20','2021-10-28','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'김성수 옻칠세계70년','2021-10-20','2021-10-28','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021마니프서울국제아트페어','2021-11-02','2021-11-13','디자인',2500,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021목우미술축전','2021-11-18','2021-11-25','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'달리와 초현실주의 거장들','2021-11-26','2022-03-06','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제10회 서울국제조각페스타2021','2021-11-30','2021-12-07','조각',1500,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'소목장 박명배와 그의 제자전','2021-12-11','2021-12-19','공예',2000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'마티스, 프린트메이커','2021-12-21','2022-03-25','회화',1000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'게티이미지사진전','2021-12-22','2022-03-27','사진',3000,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'세르주 블로크전','2021-12-31','2022-03-27','디자인',2500,'한가람미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'로즈 와일리전','2020-12-04','2021-03-28','회화 ',1000,'한가람미술관 제1전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제18회 서초미술협회전','2021-04-09','2021-04-17','회화',1000,'한가람미술관 제1전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'피카소 탄생 140주년 특별전','2021-04-30','2021-08-29','회화 ',1000,'한가람미술관 제1전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'정형렬 개인전','2021-01-09','2021-01-20','회화',1000,'한가람미술관 제3전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'잊어버린 것을 보다.','2021-05-13','2021-05-21','사진 ',3000,'한가람미술관 제3전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제 66 회 창작미술협회전','2021-05-25','2021-06-02','회화',1000,'한가람미술관 제3전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'데이비드 자민전','2021-01-05','2021-02-14','회화',1000,'한가람미술관 제4전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'도자기명장 서광수 60주년 기념전','2021-05-25','2021-06-02','조각',1500,'한가람미술관 제4전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'유에민쥔 한 시대를 웃다!','2020-11-20','2021-05-09','회화 ',1000,'한가람미술관 제5전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'퓰리처상 사진전 - SHOOTING THE PULITZER','2020-12-25','2021-02-28','사진',3000,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'L_Estro 한글','2021-03-16','2021-03-25','디자인',2500,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'내일의 예술전','2021-03-31','2021-04-18','디자인',2500,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'빛의 조형성에 관한 연구','2021-04-30','2021-05-09','디자인',2500,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'정재훈 목가구전','2021-05-12','2021-05-20','디자인',2500,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'박소형 개인전','2021-05-25','2021-06-01','회화',1000,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'이동협展. 이씨산수14. 북한산','2021-06-03','2021-06-16','회화',1000,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'여전히 희망','2021-06-06','2021-06-15','회화',1000,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'불가리 컬러 전시회','2021-07-20','2021-09-15','디자인',2500,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'모두의 그림책','2021-12-23','2022-03-27','디자인',2500,'한가람디자인미술관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'ㄱ의 순간','2020-11-12','2021-02-28','디자인 ',2500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'가남 서예 작품전','2021-05-04','2021-05-12','디자인 ',2500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'신비로운 블록버스터 판화의 세계 : 나무, 그림이 되다','2021-05-04','2021-05-30','회화',1000,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제33회 대한민국서예대전','2021-06-11','2021-06-27','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제29회대한민국서예전람회','2021-06-29','2021-07-08','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제27회 대한민국서도대전','2021-07-21','2021-07-28','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제18회한중일대한민국동양서예대전','2021-07-30','2021-08-08','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제22회 대한민국문인화대전','2021-08-10','2021-08-18','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'대한민국 전통예술 전승축제','2021-08-21','2021-08-29','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'광개토대왕비의 진수를 찾아서','2021-09-04','2021-10-30','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021 서예 초대작가전','2021-11-02','2021-11-11','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'아시아 그래픽 트리엔날레2021','2021-11-06','2021-11-13','디자인',2500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021년 한.중국제서예교류전','2021-11-12','2021-11-21','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021 한국서도초대작가전','2021-11-24','2021-12-01','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'별을 헤아리며','2021-12-09','2021-12-19','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'2021,아시안캘리그라피축제','2021-12-23','2021-12-31','서예',3500,'서울서예박물관');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'서태지의 lyrics 아래로 구혜선의 newage','2021-03-20','2021-03-28','회화',1000,'한가람미술관 제7전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'제12회 디자인아트페어2021','2021-05-13','2021-06-05','디자인',2500,'한가람미술관 제7전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'김민기 트리뷰트, 아침이슬 50주년 기념 전시','2021-06-10','2021-06-23','회화',1000,'한가람미술관 제7전시실');
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'윌리엄 웨그만_비잉 휴먼','2021-07-08','2021-09-26','디자인',2500,'한가람미술관 제7전시실');

SELECT * FROM EXHIBITION;

--MEMBER 테이블 INSERT
--일반 회원
insert into member values (member_no_seq.nextval, 'lemon', 'lemon', '1998-08-06', 'lemon123');
insert into member values (member_no_seq.nextval, 'water', 'water', '1997-08-09', 'water123');
insert into member values (member_no_seq.nextval, 'strawberry', 'strawberry', '1992-10-13', 'straw123');
insert into member values (member_no_seq.nextval, 'lion', 'lionking', '2000-08-06', 'lion321');
insert into member values (member_no_seq.nextval, 'monkey', 'monkey', '1988-02-28', 'monkey321');
select * from member;

--관리자
insert into member values (member_no_seq.nextval, 'admin', '관리자', '2000-01-01', 'admin123');

--DISCOUNT 테이블 INSERT
insert into discount values('kids', 50);
insert into discount values('youth', 30);
insert into discount values('adults', 10);
select * from discount;


--lemon이 9월 13일자 3번 전시회 티켓을 청소년 2장, 어른 1장 구매
insert into reservation values(RESERVATION_NO_SEQ.nextval, 1, 3, 2300, '2021-09-13');
select * from reservation;
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'youth', 2, 1400);
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'adults', 1, 900);
select * from reservation_line;

--strawberry가 10월 1일자 5번 전시회 티켓을 아이 3장 어른 2장 구매
insert into reservation values(RESERVATION_NO_SEQ.nextval, 3, 5, 3300, '2021-10-01');
select * from reservation;
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'kids', 3, 1500);
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'adults', 2, 1800);
select * from reservation_line;

--lion이 10월 23일자 10번 전시회 티켓을 아이 1장, 청소년 1장, 어른 1장 구매
insert into reservation values(RESERVATION_NO_SEQ.nextval, 4, 10, 2100, '2021-10-23');
select * from reservation;
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'kids', 1, 500);
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'youth', 1, 700);
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'adults', 1, 900);
select * from reservation_line;

--lion이 10월 3일자 5번 전시회 티켓을 어른 1장 구매
insert into reservation values(RESERVATION_NO_SEQ.nextval, 4, 5, 900, '2021-10-03');
select * from reservation;
insert into reservation_line values(RESERVATION_LINE_NO_SEQ.nextval, reservation_no_seq.currval, 'adults', 1, 900);
select * from reservation_line;


--REVIEW 테이블 INSERT
insert into review values(REVIEW_NO_SEQ.nextval, 1, 3, '유익한 시간이었습니다', 4);
insert into review values(REVIEW_NO_SEQ.nextval, 3, 5, '재밌었습니다. 아이들이 좋아해요~', 5);
insert into review values(REVIEW_NO_SEQ.nextval, 4, 5, '잘 놀다갑니다.', 5);
insert into review values(REVIEW_NO_SEQ.nextval, 4, 10, '그림이 참 예쁘네요', 3);
select * from review;




--member
select member_no, member_id, member_name, member_birth, member_pass from member where member_id = 'lion' and member_pass = 'lion321';
update member set member_id = 'lemon', member_birth = '1989-07-13', member_pass = 'lemon321' where member_id = 'lemon';

--reservation
select * from reservation;
select reservation_no, member_no, exhibition_no, total_amount, reg_date from reservation where member_no = 4;
select reservation_no, member_no, exhibition_no, total_amount, reg_date from reservation; 
select reservation_no, member_no, exhibition_no, total_amount, reg_date from reservation where reservation_no = 3;

--reservation_line
select reservation_line_no, reservation_no, visit_age, ticket_qty, amount from reservation_line where reservation_no = 2;

--유저번호를 조건으로 예약, 예약상세 조인해서 select
select * from reservation join reservation_line using(reservation_no) where member_no = 4;

--review
select review_no, member_no, exhibition_no, review_content from review where exhibition_no = 5;
select review_no, member_no, exhibition_no, review_content from review where Member_no = 4;
update review set review_content = '좋은 그림이었습니다' where review_no = 3;

--exhibition
update exhibition set exhibition_name = '윌리엄 웨그만 비잉 휴먼', genre = '회화', price = 2500, exhibition_loc='한가람미술관 제8전시실' where exhibition_no = 57;
select exhibition_no, exhibition_name, start_date, end_date, genre, price, exhibition_loc from exhibition;
select exhibition_no, exhibition_name, start_date, end_date, genre, price, exhibition_loc
from exhibition
where '2021-10-25' between start_date and end_date;

--discount
select visit_age, discount_rate from discount;
select visit_age, discount_rate from discount where visit_age = 'youth';

--statistics
select sum(ticket_qty) totalVisitors, sum(amount) totalProfits from reservation_line;

select sum(ticket_qty) 총티켓수, sum(amount) 총판매액, to_char(reg_date, 'YY-MM-DD') 날짜
from reservation join reservation_line using(reservation_no)
where exhibition_no = 5 and reg_date between '211001' and '211005'
group by reg_date;

select sum(ticket_qty) 총티켓수, sum(amount) 총판매액, to_char(reg_date, 'YY-MM-DD') 날짜
from reservation join reservation_line using(reservation_no)
where reg_date between '20210401' and '20211005'
group by reg_date;

commit;
select * from exhibition;
insert into exhibition values (exhibition_NO_SEQ.NEXTVAL,'윌리엄 웨그만_비잉 휴먼','2021-07-08','2021-09-26','디자인',2500,'한가람미술관 제7전시실');

rollback;

delete from reservation;
delete from reservation_line;
delete from review;
delete from reservation_line where reservation_no = ?;
select * from reservation;
delete from reservation where reservation_no = 32;
select * from reservation_line;
delete from reservation_line where reservation_no = 8;
commit;
